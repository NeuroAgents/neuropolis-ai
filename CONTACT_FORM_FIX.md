# Исправление ошибки в контактной форме

## Описание проблемы

При отправке формы обратной связи на сайте появлялась ошибка:

> Произошла ошибка при отправке. Пожалуйста, попробуйте позже.

## Причины ошибки

Анализ кода показал следующие возможные причины:

1. **Отсутствие таблицы `contacts` в базе данных Supabase**: Код пытался вставить данные в несуществующую таблицу.
2. **Проблемы с настройками Telegram-бота**: Неправильный токен бота или ID чата могли привести к ошибке при попытке отправить уведомление.

## Внесенные исправления

### 1. Создание таблицы contacts

Был добавлен SQL-скрипт для создания необходимой таблицы: `supabase-contacts.sql`

Также добавлен автоматический скрипт для создания таблицы через API Supabase: `scripts/create-contacts-table.js`

### 2. Улучшение обработки ошибок в компоненте

В файле `src/components/Contact/Contact.tsx` были внесены следующие изменения:

- Улучшена обработка и логирование ошибок
- Добавлена проверка соединения с Supabase перед отправкой данных
- Изменена функция отправки сообщения в Telegram для более детального логирования ошибок
- Добавлена обработка ситуации, когда данные успешно сохранены, но уведомление в Telegram не отправлено

### 3. Инструмент для проверки настроек Telegram

Добавлен скрипт для проверки токена бота и ID чата: `scripts/check-telegram-settings.js`

## Инструкция по применению исправлений

1. **Создание таблицы contacts в Supabase**:

   ```
   npm run setup-contacts
   ```

2. **Проверка настроек Telegram**:

   ```
   npm run check-telegram
   ```

3. **Если настройки Telegram не работают**:

   Обновите значения в файле `.env` или `.env.local`:

   ```
   NEXT_PUBLIC_TELEGRAM_BOT_TOKEN=ваш_токен_бота
   NEXT_PUBLIC_TELEGRAM_CHAT_ID=ваш_id_чата
   ```

   Затем перезапустите проверку: `npm run check-telegram`

4. **После внесения всех изменений**:

   Перезапустите сервер разработки:

   ```
   npm run dev
   ```

   Или создайте новую сборку для продакшена:

   ```
   npm run build
   npm run start
   ```

## Дополнительная документация

Подробную информацию о настройке базы данных Supabase смотрите в файле `SUPABASE_SETUP.md`.
